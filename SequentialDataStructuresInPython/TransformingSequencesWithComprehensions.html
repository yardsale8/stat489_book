<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>3.8. Transforming Sequences with Comprehensions &mdash; Runestone Interactive Overview</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.0.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/codemirror.css" type="text/css" />
    <link rel="stylesheet" href="../_static/activecode.css" type="text/css" />
    <link rel="stylesheet" href="../_static/clickable.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pytutor.css" type="text/css" />
    <link rel="stylesheet" href="../_static/modal-basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/datafile.css" type="text/css" />
    <link rel="stylesheet" href="../_static/dragndrop.css" type="text/css" />
    <link rel="stylesheet" href="../_static/fitb.css" type="text/css" />
    <link rel="stylesheet" href="../_static/codemirror.css" type="text/css" />
    <link rel="stylesheet" href="../_static/livecode.css" type="text/css" />
    <link rel="stylesheet" href="../_static/parsons.css" type="text/css" />
    <link rel="stylesheet" href="../_static/lib/prettify.css" type="text/css" />
    <link rel="stylesheet" href="../_static/poll.css" type="text/css" />
    <link rel="stylesheet" href="../_static/tabbedstuff.css" type="text/css" />
    <link rel="stylesheet" href="../_static/video.css" type="text/css" />
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootswatch/2.3.1/""/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/jquery-ui-1.10.3.custom.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/user-highlights.css" type="text/css" />
    <link rel="stylesheet" href="../_static/runestone-custom-sphinx-bootstrap.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/runestonebase.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/jquery.highlight.js"></script>
    <script type="text/javascript" src="../_static/bookfuncs.js"></script>
    <script type="text/javascript" src="../_static/codemirror.js"></script>
    <script type="text/javascript" src="../_static/xml.js"></script>
    <script type="text/javascript" src="../_static/css.js"></script>
    <script type="text/javascript" src="../_static/htmlmixed.js"></script>
    <script type="text/javascript" src="../_static/python.js"></script>
    <script type="text/javascript" src="../_static/javascript.js"></script>
    <script type="text/javascript" src="../_static/activecode.js"></script>
    <script type="text/javascript" src="../_static/skulpt.min.js"></script>
    <script type="text/javascript" src="../_static/skulpt-stdlib.js"></script>
    <script type="text/javascript" src="../_static/clike.js"></script>
    <script type="text/javascript" src="../_static/timed_activecode.js"></script>
    <script type="text/javascript" src="../_static/animationbase.js"></script>
    <script type="text/javascript" src="../_static/mchoice.js"></script>
    <script type="text/javascript" src="../_static/timedmc.js"></script>
    <script type="text/javascript" src="../_static/timed.js"></script>
    <script type="text/javascript" src="../_static/clickable.js"></script>
    <script type="text/javascript" src="../_static/timedclickable.js"></script>
    <script type="text/javascript" src="../_static/d3.v2.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.ba-bbq.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.jsPlumb-1.3.10-all-min.js"></script>
    <script type="text/javascript" src="../_static/pytutor.js"></script>
    <script type="text/javascript" src="../_static/codelens.js"></script>
    <script type="text/javascript" src="../_static/skulpt.min.js"></script>
    <script type="text/javascript" src="../_static/skulpt-stdlib.js"></script>
    <script type="text/javascript" src="../_static/datafile.js"></script>
    <script type="text/javascript" src="../_static/dragndrop.js"></script>
    <script type="text/javascript" src="../_static/timeddnd.js"></script>
    <script type="text/javascript" src="../_static/fitb.js"></script>
    <script type="text/javascript" src="../_static/timedfitb.js"></script>
    <script type="text/javascript" src="../_static/livecode.js"></script>
    <script type="text/javascript" src="../_static/clike.js"></script>
    <script type="text/javascript" src="../_static/lib/prettify.js"></script>
    <script type="text/javascript" src="../_static/lib/hammer.min.js"></script>
    <script type="text/javascript" src="../_static/parsons.js"></script>
    <script type="text/javascript" src="../_static/timedparsons.js"></script>
    <script type="text/javascript" src="../_static/poll.js"></script>
    <script type="text/javascript" src="../_static/reveal.js"></script>
    <script type="text/javascript" src="../_static/shortanswer.js"></script>
    <script type="text/javascript" src="../_static/timed_shortanswer.js"></script>
    <script type="text/javascript" src="../_static/tabbedstuff.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/jquery-ui-1.10.3.custom.min.js"></script>
    <script type="text/javascript" src="../_static/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <script type="text/javascript" src="../_static/waypoints.min.js"></script>
    <script type="text/javascript" src="../_static/rangy-core.js"></script>
    <script type="text/javascript" src="../_static/rangy-textrange.js"></script>
    <script type="text/javascript" src="../_static/rangy-cssclassapplier.js"></script>
    <script type="text/javascript" src="../_static/user-highlights.js"></script>
    <script type="text/javascript" src="../_static/jquery.idle-timer.js"></script>
    <script type="text/javascript" src="../_static/processing-1.4.1.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.hotkey.js"></script>
    <script type="text/javascript" src="../_static/jquery-migrate-1.2.1.min.js"></script>
    <link rel="top" title="Runestone Interactive Overview" href="../index.html" />
    <link rel="up" title="3. Sequential Data Structures in Python" href="toctree.html" />
    <link rel="next" title="3.10. Computational Complexity and Big O Notation." href="ComputationalComplexityAndBigONotation.html" />
    <link rel="prev" title="3.7. Sequence Methods and Working with Strings and Lists" href="SequenceMethodsandWorkingwithStringsAndLists.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
<link rel="shortcut icon" href="/runestone/static/favicon.ico" type="image/ico" />

<script type="text/javascript">
  eBookConfig = {};
  eBookConfig.host = 'http://127.0.0.1:8000' ? 'http://127.0.0.1:8000' : 'http://127.0.0.1:8000';
  eBookConfig.app = eBookConfig.host+'/runestone';
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.course = 'STAT489';
  eBookConfig.logLevel = 0;
  eBookConfig.loginRequired = false;
  eBookConfig.build_info = "unknown";
  eBookConfig.isLoggedIn = false;
  eBookConfig.useRunestoneServices = false;
  eBookConfig.python3 = true;
  eBookConfig.basecourse = 'STAT489';
</script>

<div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&status=0";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>



  </head>
  <body role="document">


<!-- Begin navbar -->
<div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type='button' class='navbar-toggle' data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div>
        <a class="brand-logo" style='background: transparent url("../_static/img/logo_small.png") no-repeat 0px 0px;' href="/runestone/default/user/login">&nbsp; </a>
        <a class="navbar-brand" href="../index.html">STAT489</a>
      </div>
    </div>

    <div class="navbar-collapse collapse navbar-ex1-collapse">

      <ul class="nav navbar-nav navbar-right">

        <li class="divider-vertical"></li>

        <!-- social media dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-share-alt" style="opacity: 0.9"></i>
          </a>
          <ul class="dropdown-menu social-menu">
              <li>
                <div>
                  <b>Runestone in social media:</b>
                </div>
                <a href="https://twitter.com/iRunestone" class="twitter-follow-button" data-show-count="true">Follow @iRunestone</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                <div class="fb-like" data-href="https://www.facebook.com/RunestoneInteractive" data-send="false" data-layout="button_count" data-width="300" data-show-faces="false" data-font="arial"></div>
              </li>

              <li class="divider"></li>
              <li>
                <div>
                  <b>Help support us:</b>
                </div>
                <div>
                    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
                  <input type="hidden" name="cmd" value="_s-xclick">
                  <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----MIIHNwYJKoZIhvcNAQcEoIIHKDCCByQCAQExggEwMIIBLAIBADCBlDCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20CAQAwDQYJKoZIhvcNAQEBBQAEgYAcrkqh1hn3lYqIpfXxNqe1T82EhXzCJGy1yMAmklpyZshyMkfDGe1Bhx+iwyGeoYRTTyphFmP+9M3NyO0+Q5XdHxgZPx/zYjjBxlZHgEV6jhE8bN2fHkkPf0VHfz0a0QQylQOPlKiOTZV7B37Jpk6yM47oVZ1tG/KNm0NkfmB76DELMAkGBSsOAwIaBQAwgbQGCSqGSIb3DQEHATAUBggqhkiG9w0DBwQIi0GmFfOlcjuAgZBbYOo9UO+CpMQa+PYqwsUmUnJvXIImeMeNI3KVTUx5Cfk9gNMo3WzPeiB5IqZo9nRAQ0mf1qL2ecLeB5tidM+lgBUhOxfj3/FecpnVFa0263gp4g+PLw8jzhvVRdUon1K3SeO1Rzh23fIRKwnrD6btt73uwtj0sl3tGd8qz+6GIcwPDdRk9VcUffiBJT/ZagKgggOHMIIDgzCCAuygAwIBAgIBADANBgkqhkiG9w0BAQUFADCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20wHhcNMDQwMjEzMTAxMzE1WhcNMzUwMjEzMTAxMzE1WjCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20wgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAMFHTt38RMxLXJyO2SmS+Ndl72T7oKJ4u4uw+6awntALWh03PewmIJuzbALScsTS4sZoS1fKciBGoh11gIfHzylvkdNe/hJl66/RGqrj5rFb08sAABNTzDTiqqNpJeBsYs/c2aiGozptX2RlnBktH+SUNpAajW724Nv2Wvhif6sFAgMBAAGjge4wgeswHQYDVR0OBBYEFJaffLvGbxe9WT9S1wob7BDWZJRrMIG7BgNVHSMEgbMwgbCAFJaffLvGbxe9WT9S1wob7BDWZJRroYGUpIGRMIGOMQswCQYDVQQGEwJVUzELMAkGA1UECBMCQ0ExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC1BheVBhbCBJbmMuMRMwEQYDVQQLFApsaXZlX2NlcnRzMREwDwYDVQQDFAhsaXZlX2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbYIBADAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBBQUAA4GBAIFfOlaagFrl71+jq6OKidbWFSE+Q4FqROvdgIONth+8kSK//Y/4ihuE4Ymvzn5ceE3S/iBSQQMjyvb+s2TWbQYDwcp129OPIbD9epdr4tJOUNiSojw7BHwYRiPh58S1xGlFgHFXwrEBb3dgNbMUa+u4qectsMAXpVHnD9wIyfmHMYIBmjCCAZYCAQEwgZQwgY4xCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJDQTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLUGF5UGFsIEluYy4xEzARBgNVBAsUCmxpdmVfY2VydHMxETAPBgNVBAMUCGxpdmVfYXBpMRwwGgYJKoZIhvcNAQkBFg1yZUBwYXlwYWwuY29tAgEAMAkGBSsOAwIaBQCgXTAYBgkqhkiG9w0BCQMxCwYJKoZIhvcNAQcBMBwGCSqGSIb3DQEJBTEPFw0xMzExMDMxMzQxMzFaMCMGCSqGSIb3DQEJBDEWBBRDJF8w+zsMr7FSk+pwinB5f5D4rzANBgkqhkiG9w0BAQEFAASBgHw1LMHpkpaqHIvDGdFE0eG+2mZlmMnUeDCBhQlbc7QMzFQYKTV94NfaebBO4PmNdADe1rq4WidSRZZbE7CzkX9IGENYnBTWY0hb2l0lGdGrJdGeWyV3ekg9WVaFMMumrekds96h3Cx7dGz2kWDzIai2iEXE/qoE+xpkyXAYZNV3-----END PKCS7-----
                  ">
                  <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                  <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
                  </form>

                </div>
              </li>
          </ul>
        </li>
        <!-- end social media dropdown -->

        <li class="divider-vertical"></li>

        <!-- search dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-search" style='opacity:0.9;'></i>
          </a>
          <ul class='dropdown-menu'>
            
                <li><a href='../index.html'>Table of Contents</a></li>
            
            <li><a href='/runestone/static/STAT489/genindex.html'>Book Index</a></li>
            <li class="divider"></li>
            <li id="scratch_ac_link"><a href="javascript:ACFactory.toggleScratchActivecode()">Scratch ActiveCode</a></li>
            <li class="divider"></li>
            <li style="width: 240px;">
              <form class="navbar-search" style="margin:10px;" action="../search.html" method="get">
                <div class="input-group">
                  <input type="text" class="form-control" name="q" placeholder="Search this book" />
                  <span class="input-group-btn">
                    <button class="btn btn-primary" style="margin:0;" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </span>
                </div><!-- /input-group -->
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
            </li>
          </ul>
        </li>
        <!-- end search dropdown -->

        <li class="divider-vertical"></li>

        
        <li class="divider-vertical"></li>

        <!-- help menu dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-question-sign" style="opacity:0.9;"></i>
          </a>
          <ul class="dropdown-menu user-menu">
            <li><a href='/runestone/static/STAT489/navhelp.html'>Navigation Help</a></li>
            <li><a href='/runestone/static/overview/instructor.html'>Help for Instructors</a></li>
            <li class="divider"></li>
            <li><a href='http://runestoneinteractive.org'>About Runestone</a></li>
            <li><a href='/runestone/default/reportabug?course=STAT489&page=TransformingSequencesWithComprehensions'>Report A Problem</a></li>
          </ul>
        </li>
        <!-- end help menu dropdown -->

        <li class="divider-vertical"></li>

      </ul>

      <ul class="nav navbar-nav">
        <li class="divider-vertical"></li>
        <!--
          <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">3.8. Transforming Sequences with Comprehensions</a><ul>
<li><a class="reference internal" href="#list-comprehensions">3.8.1. List Comprehensions</a></li>
<li><a class="reference internal" href="#character-classification">3.8.2. Character classification</a></li>
</ul>
</li>
<li><a class="reference internal" href="#common-comprehension-patterns">3.9. Common Comprehension Patterns</a><ul>
<li><a class="reference internal" href="#use-built-in-helper-functions">3.9.1. Use built-in helper functions</a></li>
<li><a class="reference internal" href="#use-built-in-functions-to-reduce-a-list-to-a-value">3.9.2. Use built-in functions to reduce a list to a value</a></li>
<li><a class="reference internal" href="#use-any-and-all-for-boolean-questions-about-a-list">3.9.3. Use <code class="docutils literal"><span class="pre">any</span></code> and <code class="docutils literal"><span class="pre">all</span></code> for Boolean questions about a list</a></li>
<li><a class="reference internal" href="#sometimes-it-is-easier-to-describe-what-your-don-t-want">3.9.4. Sometimes it is easier to describe what your don&#8217;t want</a></li>
</ul>
</li>
</ul>
</ul>
</li>
          <li class="divider-vertical"></li>
        
        
          
  <li id="relations-prev" title="Previous Chapter - 3.7. Sequence Methods and Working with Strings and Lists" data-toggle="tooltip">
    <a href="SequenceMethodsandWorkingwithStringsAndLists.html" >
      <i class='glyphicon glyphicon-backward' style='opacity:0.9;'></i>
    </a>
  </li>
  
  <li id="relations-next" title='Next Chapter - 3.10. Computational Complexity and Big O Notation.' data-toggle="tooltip" >
    <a href="ComputationalComplexityAndBigONotation.html" >
      <i class='glyphicon glyphicon-forward' style='opacity:0.9;'></i>
    </a>
  </li>
  <li class="divider-vertical"></li>

<script type="text/javascript">
  opts = {'placement':'bottom',
          'selector': '',
          'delay': { show: 100, hide: 50}
         };

  $('#relations-prev').tooltip(opts);
  $('#relations-next').tooltip(opts);
</script>
        -->
        
          <li></li>
        
      </ul>

    </div>
  </div>
</div>


<div class="container" id="continue-reading"></div>

<div class="container" id="main-content">
  
  <div class="section" id="transforming-sequences-with-comprehensions">
<h1>3.8. Transforming Sequences with Comprehensions<a class="headerlink" href="#transforming-sequences-with-comprehensions" title="Permalink to this headline">¶</a></h1>
<p>Python has a very convenient method for describing one list in terms for another
call a <em>list comprehension</em>.  Comprehensions are very &#8220;functional&#8221; in their
nature and we will make heavy use of these comprehensions moving forward.</p>
<div class="section" id="list-comprehensions">
<h2>3.8.1. List Comprehensions<a class="headerlink" href="#list-comprehensions" title="Permalink to this headline">¶</a></h2>
<p>Suppose that we wish to create a list from a sequence of values based on some
selection criteria.  An easy way to do this type of processing in Python is to
use a <strong>list comprehension</strong>.  List comprehensions are concise ways to create
lists.  The general syntax is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span> <span class="k">for</span> <span class="o">&lt;</span><span class="n">item</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">sequence</span><span class="o">&gt;</span> <span class="k">if</span>  <span class="o">&lt;</span><span class="n">condition</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p>where the if clause is optional.  For example,</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">mylist</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>

<span class="gp">In [2]: </span><span class="n">yourlist</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">mylist</span><span class="p">]</span>

<span class="gp">In [3]: </span><span class="n">yourlist</span>
<span class="gh">Out[3]: </span><span class="go">[1, 4, 9, 16, 25]</span>
</pre></div>
</div>
<p>The expression describes each element of the list that is being built.  The
<code class="docutils literal"><span class="pre">for</span></code> clause iterates through each item in a sequence.  The items are filtered
by the <code class="docutils literal"><span class="pre">if</span></code> clause if there is one.  In the example above, the <code class="docutils literal"><span class="pre">for</span></code>
statement lets <code class="docutils literal"><span class="pre">item</span></code> take on all the values in the list <code class="docutils literal"><span class="pre">mylist</span></code> one after
the other. Each item is then squared before it is added to the list that is
being built.  The result is a list of squares of the values in <code class="docutils literal"><span class="pre">mylist</span></code>.</p>
<div class="figure">
<img alt="Parts of a list comprehension" src="http://python-3-patterns-idioms-test.readthedocs.io/en/latest/_images/listComprehensions.gif" />
<div class="legend">
The three parts of a comprehension are the <strong>output expression</strong>, the
description of the sequence, and the (optional) <strong>predicate</strong>.  This image
is copied from the open source <a class="reference external" href="https://bitbucket.org/BruceEckel/python-3-patterns-idioms/src/8f0091a18c73074fca1da624c652a9adb456654b/src/Introduction.rst?at=default&amp;fileviewer=file-view-default">Python 3 Patterns, Recipes and Idioms</a>
book and is shared under the <a class="reference external" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-Share Alike 3.0</a> license.</div>
</div>
<p>The built-in <code class="docutils literal"><span class="pre">range</span></code> Python function is a useful tool for generating a
sequence of numbers.  The sequence provided by <code class="docutils literal"><span class="pre">range</span></code> always starts with 0.
If you ask for <code class="docutils literal"><span class="pre">range(4)</span></code>, then you will get 4 values starting with 0.  In
other words, 0, 1, 2, and finally 3.  Notice that 4 is not included since we
started with 0.  Likewise, <code class="docutils literal"><span class="pre">range(10)</span></code> provides 10 values, 0 through 9.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="p">[</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)]</span>
<span class="gh">Out[4]: </span><span class="go">[0, 1, 2, 3]</span>

<span class="gp">In [5]: </span><span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
<span class="go">                     Out[5]: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Computer scientists like to count from 0! We will explain the reason why in
the next chapter.</p>
</div>
<p>The <a class="reference external" href="http://docs.python.org/py3k/library/functions.html?highlight=range#range">range</a> function is actually a very powerful function
when it comes to creating sequences of integers.  It can take one, two, or three
parameters.  We have seen the simplest case of one parameter such as
<code class="docutils literal"><span class="pre">range(4)</span></code> which creates <code class="docutils literal"><span class="pre">[0,</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code>.  But what if we really want to have
the sequence <code class="docutils literal"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">4]</span></code>?  We can do this by using a two parameter version
of <code class="docutils literal"><span class="pre">range</span></code> where the first parameter is the starting point and the second
parameter is the ending point.  The evaluation of <code class="docutils literal"><span class="pre">range(1,5)</span></code> produces the
desired sequence.  What happened to the 5?  In this case we interpret the
parameters of the <code class="docutils literal"><span class="pre">range</span></code> function to mean <code class="docutils literal"><span class="pre">range(start,stop+1)</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Why in the world would range not just work like range(start, stop)?  Think
about it like this.  Because computer scientists like to start counting at 0
instead of 1, <code class="docutils literal"><span class="pre">range(N)</span></code> produces a sequence of things that is N long, but
the consequence of this is that the final number of the sequence is N-1.  In
the case of start, stop it helps to simply think that the sequence begins
with start and continues as long as the number is less than stop.</p>
</div>
<p>Here are a three examples for you to considered.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [6]: </span><span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)]</span>
<span class="gh">Out[6]: </span><span class="go">[0, 1, 2, 3]</span>

<span class="gp">In [7]: </span><span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)]</span>
<span class="go">                     Out[7]: [1, 2, 3, 4, 5, 6, 7, 8, 9]</span>

<span class="gp">In [8]: </span><span class="p">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">)]</span>
<span class="go">                                                         Out[8]: [1, 3, 5, 7, 9]</span>
</pre></div>
</div>
<p>Notice that the last call to <code class="docutils literal"><span class="pre">range</span></code> added the third parameter, which
represents the <strong>step size</strong>.  In this case, every item is 2 more than the last
item.   Making a list that counts down from some starting number can be
accomplished using a negative step size.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [9]: </span><span class="p">[</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)]</span>
<span class="gh">Out[9]: </span><span class="go">[10, 9, 8, 7, 6, 5, 4, 3, 2, 1]</span>
</pre></div>
</div>
<p><strong>Check your understanding</strong></p>

            <ul data-component="multiplechoice" data-multipleanswers="false"  id="test_question3_5_1">
            exceptions-4-124: In the command range(3, 10, 2), what does the second argument (10) specify?
            <li data-component="answer" data-correct id="test_question3_5_1_opt_a">(A) Range should generate a list that stops at 9 (including 9).</li><li data-component="feedback" id="test_question3_5_1_opt_a">Range will generate the list [3, 5, 7, 9].</li>
            
            <li data-component="answer"  id="test_question3_5_1_opt_b">(B) Range should generate a list that starts at 10 (including 10).</li><li data-component="feedback" id="test_question3_5_1_opt_b">The first argument (3) tells range what number to start at.</li>
            
            <li data-component="answer"  id="test_question3_5_1_opt_c">(C) Range should generate a list starting at 3 that stops at 10 (including 10).</li><li data-component="feedback" id="test_question3_5_1_opt_c">Range will always stop at the number before (not including) the specified ending point for the list.</li>
            
            <li data-component="answer"  id="test_question3_5_1_opt_d">(D) Range should generate a list using every 10th number between the start and the stopping number.</li><li data-component="feedback" id="test_question3_5_1_opt_d">The third argument (2) tells range how many numbers to skip between each element in the list.</li>
            

            </ul>
            
            <ul data-component="multiplechoice" data-multipleanswers="false"  id="test_question3_5_2">
            exceptions-4-125: What command correctly generates the list [2, 5, 8]?
            <li data-component="answer"  id="test_question3_5_2_opt_a">(A) range(2, 5, 8)</li><li data-component="feedback" id="test_question3_5_2_opt_a">This command generates the list [2] because the first number (2) tells range where to start, the second number tells range where to end (5, not inclusive) and the third number tells range how many numbers to skip between elements (8).  Since 10>= 8, there is only one number in this list.</li>
            
            <li data-component="answer"  id="test_question3_5_2_opt_b">(B) range(2, 8, 3)</li><li data-component="feedback" id="test_question3_5_2_opt_b">This command generates the list [2, 5] because 8 is not less than 8 (the specified ending number).</li>
            
            <li data-component="answer" data-correct id="test_question3_5_2_opt_c">(C) range(2, 10, 3)</li><li data-component="feedback" id="test_question3_5_2_opt_c">The first number is the starting point, the second is the maximum allowed, and the third is the amount to increment by.</li>
            
            <li data-component="answer"  id="test_question3_5_2_opt_d">(D) range(8, 1, -3)</li><li data-component="feedback" id="test_question3_5_2_opt_d">This command generates the list [8, 5, 3] because it starts at 8, ends at (or above 1), and skips every third number going down.</li>
            

            </ul>
            
            <ul data-component="multiplechoice" data-multipleanswers="false"  id="test_question3_5_3">
            exceptions-4-126: What happens if you give range only one argument?  For example: range(4)
            <li data-component="answer" data-correct id="test_question3_5_3_opt_a">(A) It will generate a list starting at 0, with every number included up to but not including the argument it was passed.</li><li data-component="feedback" id="test_question3_5_3_opt_a">Yes, if you only give one number to range it starts with 0 and ends before the number specified incrementing by 1.</li>
            
            <li data-component="answer"  id="test_question3_5_3_opt_b">(B) It will generate a list starting at 1, with every number up to but not including the argument it was passed.</li><li data-component="feedback" id="test_question3_5_3_opt_b">Range starts at 0 unless otherwise specified.</li>
            
            <li data-component="answer"  id="test_question3_5_3_opt_c">(C) It will generate a list starting at 1, with every number including the argument it was passed.</li><li data-component="feedback" id="test_question3_5_3_opt_c">Range starts at 0 unless otherwise specified, and never includes its ending element (which is the argument it was passed).</li>
            
            <li data-component="answer"  id="test_question3_5_3_opt_d">(D) It will cause an error: range always takes exactly 3 arguments.</li><li data-component="feedback" id="test_question3_5_3_opt_d">If range is passed only one argument, it interprets that argument as the end of the list (not inclusive).</li>
            

            </ul>
            <p>One final note about the <code class="docutils literal"><span class="pre">range</span></code> function in python: it is lazy!  Notice that
trying to evaluate this function by itself doesn&#8217;t return the list.  Instead, it
returns a <strong>generator</strong> object that will wait as long as possible to generate
this list.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [10]: </span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gh">Out[10]: </span><span class="go">range(0, 5)</span>
</pre></div>
</div>
<p>We have a number of methods for forcing <code class="docutils literal"><span class="pre">range</span></code> to complete the process
including comprehensions and the <code class="docutils literal"><span class="pre">list</span></code> conversion function.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [11]: </span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="gh">Out[11]: </span><span class="go">[0, 1, 2, 3, 4]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There are a number of lazy constructions in Python 3. We will look at these
features in a later chapter.</p>
</div>
<p>An alternative method for generating odd values involves using a Boolean
function to filter items out of our list using the optional if clause.  For
example, let&#8217;s compute the cube root for all odd values less than 10.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [12]: </span><span class="n">is_odd</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span>

<span class="gp">In [13]: </span><span class="n">cube_root</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span>

<span class="gp">In [14]: </span><span class="p">[</span><span class="n">cube_root</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">if</span> <span class="n">is_odd</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span>
<span class="gh">Out[14]: </span><span class="go"></span>
<span class="go">[1.0,</span>
<span class="go"> 1.4422495703074083,</span>
<span class="go"> 1.7099759466766968,</span>
<span class="go"> 1.912931182772389,</span>
<span class="go"> 2.080083823051904]</span>
</pre></div>
</div>
<p>Why might we want to use this version of the comprehension?  Here we are using
two explicit abstractions to describe the <em>intent</em> of our code.  This should
make it easier for someone that later reads through the code to understand the
meaning of this construction, i.e. that we are taking the <em>cube root</em> of <em>odd
numbers</em> up to 10.</p>
<p><strong>Check your understanding</strong></p>

            <ul data-component="multiplechoice" data-multipleanswers="false"  id="test_question9_20_1">
            <p>exceptions-4-127: What is printed by the following statements?</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">alist</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">blist</span> <span class="o">=</span> <span class="p">[</span><span class="n">num</span><span class="o">*</span><span class="mi">2</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">alist</span> <span class="k">if</span> <span class="n">num</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">1</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">blist</span><span class="p">)</span>
</pre></div>
</div>

            <li data-component="answer"  id="test_question9_20_1_opt_a">(A) [4,2,8,6,5]</li><li data-component="feedback" id="test_question9_20_1_opt_a">Items from alist are doubled before being placed in blist.</li>
            
            <li data-component="answer"  id="test_question9_20_1_opt_b">(B) [8,4,16,12,10]</li><li data-component="feedback" id="test_question9_20_1_opt_b">Not all the items in alist are to be included in blist.  Look at the if clause.</li>
            
            <li data-component="answer"  id="test_question9_20_1_opt_c">(C) 10</li><li data-component="feedback" id="test_question9_20_1_opt_c">The result needs to be a list.</li>
            
            <li data-component="answer" data-correct id="test_question9_20_1_opt_d">(D) [10].</li><li data-component="feedback" id="test_question9_20_1_opt_d">Yes, 5 is the only odd number in alist.  It is doubled before being placed in blist.</li>
            

            </ul>
            <div class="admonition note">
<p class="first admonition-title">Note</p>
<p>This workspace is provided for your convenience.  You can use this
activecode window to try out anything you like.</p>

<textarea data-component="activecode" id=scratch_08_01 data-lang="python"    data-timelimit=25000  data-codelens="true" data-audio=''     >


</textarea>
</div>
</div>
<div class="section" id="character-classification">
<h2>3.8.2. Character classification<a class="headerlink" href="#character-classification" title="Permalink to this headline">¶</a></h2>
<p>It is often helpful to examine a character and test whether it is upper- or
lowercase, or whether it is a character or a digit. The <code class="docutils literal"><span class="pre">string</span></code> module
provides several constants that are useful for these purposes. One of these,
<code class="docutils literal"><span class="pre">string.digits</span></code> is equivalent to &#8220;0123456789&#8221;.  It can be used to check if a
character is a digit using the <code class="docutils literal"><span class="pre">in</span></code> operator.</p>
<p>The string <code class="docutils literal"><span class="pre">string.ascii_lowercase</span></code> contains all of the ascii letters that the
system considers to be lowercase. Similarly, <code class="docutils literal"><span class="pre">string.ascii_uppercase</span></code> contains
all of the uppercase letters. <code class="docutils literal"><span class="pre">string.punctuation</span></code> comprises all the
characters considered to be punctuation. Try the following and see what you get.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [15]: </span><span class="kn">import</span> <span class="nn">string</span>

<span class="gp">In [16]: </span><span class="n">string</span><span class="o">.</span><span class="n">ascii_lowercase</span>
<span class="gh">Out[16]: </span><span class="go">&#39;abcdefghijklmnopqrstuvwxyz&#39;</span>

<span class="gp">In [17]: </span><span class="n">string</span><span class="o">.</span><span class="n">ascii_uppercase</span>
<span class="go">                                      Out[17]: &#39;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#39;</span>

<span class="gp">In [18]: </span><span class="n">string</span><span class="o">.</span><span class="n">digits</span>
<span class="go">                                                                            Out[18]: &#39;0123456789&#39;</span>

<span class="gp">In [19]: </span><span class="n">string</span><span class="o">.</span><span class="n">punctuation</span>
<span class="go">                                                                                                  Out[19]: &#39;!&quot;#$%&amp;\&#39;()*+,-./:;&lt;=&gt;?@[\\]^_`{|}~&#39;</span>
</pre></div>
</div>
<p>For more information consult the <code class="docutils literal"><span class="pre">string</span></code> module documentation (see <a class="reference external" href="http://docs.python.org/py3k/py-modindex.html">Global
Module Index</a>).</p>
<p>We can use list comprehensions to describe a new string, but we need to convert
the result back to a string using the <code class="docutils literal"><span class="pre">str</span></code> conversion function.  For example,
let&#8217;s remove all of the punctuation from a string.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [20]: </span><span class="n">zen_of_python</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;The Zen of Python, by Tim Peters</span>
<span class="gp">   ....: </span><span class="s1">Beautiful is better than ugly.</span>
<span class="gp">   ....: </span><span class="s1">Explicit is better than implicit.</span>
<span class="gp">   ....: </span><span class="s1">Simple is better than complex.</span>
<span class="gp">   ....: </span><span class="s1">Complex is better than complicated.</span>
<span class="gp">   ....: </span><span class="s1">Flat is better than nested.</span>
<span class="gp">   ....: </span><span class="s1">Sparse is better than dense.</span>
<span class="gp">   ....: </span><span class="s1">Readability counts.</span>
<span class="gp">   ....: </span><span class="s1">Special cases aren&#39;t special enough to break the rules.</span>
<span class="gp">   ....: </span><span class="s1">Although practicality beats purity.</span>
<span class="gp">   ....: </span><span class="s1">Errors should never pass silently.</span>
<span class="gp">   ....: </span><span class="s1">Unless explicitly silenced.</span>
<span class="gp">   ....: </span><span class="s1">In the face of ambiguity, refuse the temptation to guess.</span>
<span class="gp">   ....: </span><span class="s1">There should be one-- and preferably only one --obvious way to do it.</span>
<span class="gp">   ....: </span><span class="s1">Although that way may not be obvious at first unless you&#39;re Dutch.</span>
<span class="gp">   ....: </span><span class="s1">Now is better than never.</span>
<span class="gp">   ....: </span><span class="s1">Although never is often better than *right* now.</span>
<span class="gp">   ....: </span><span class="s1">If the implementation is hard to explain, it&#39;s a bad idea.</span>
<span class="gp">   ....: </span><span class="s1">If the implementation is easy to explain, it may be a good idea.</span>
<span class="gp">   ....: </span><span class="s1">Namespaces are one honking great idea -- let&#39;s do more of those!&#39;&#39;&#39;</span>
<span class="gp">   ....: </span>

<span class="gp">In [21]: </span><span class="n">zen_list_no_punc</span> <span class="o">=</span> <span class="p">[</span><span class="n">ch</span> <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">zen_of_python</span> <span class="k">if</span> <span class="n">ch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">string</span><span class="o">.</span><span class="n">punctuation</span><span class="p">]</span>

<span class="gp">In [22]: </span><span class="k">print</span><span class="p">(</span><span class="n">zen_list_no_punc</span><span class="p">)</span>
<span class="go">[&#39;T&#39;, &#39;h&#39;, &#39;e&#39;, &#39; &#39;, &#39;Z&#39;, &#39;e&#39;, &#39;n&#39;, &#39; &#39;, &#39;o&#39;, &#39;f&#39;, &#39; &#39;, &#39;P&#39;, &#39;y&#39;, &#39;t&#39;, &#39;h&#39;, &#39;o&#39;, &#39;n&#39;, &#39; &#39;, &#39;b&#39;, &#39;y&#39;, &#39; &#39;, &#39;T&#39;, &#39;i&#39;, &#39;m&#39;, &#39; &#39;, &#39;P&#39;, &#39;e&#39;, &#39;t&#39;, &#39;e&#39;, &#39;r&#39;, &#39;s&#39;, &#39;\n&#39;, &#39;B&#39;, &#39;e&#39;, &#39;a&#39;, &#39;u&#39;, &#39;t&#39;, &#39;i&#39;, &#39;f&#39;, &#39;u&#39;, &#39;l&#39;, &#39; &#39;, &#39;i&#39;, &#39;s&#39;, &#39; &#39;, &#39;b&#39;, &#39;e&#39;, &#39;t&#39;, &#39;t&#39;, &#39;e&#39;, &#39;r&#39;, &#39; &#39;, &#39;t&#39;, &#39;h&#39;, &#39;a&#39;, &#39;n&#39;, &#39; &#39;, &#39;u&#39;, &#39;g&#39;, &#39;l&#39;, &#39;y&#39;, &#39;\n&#39;, &#39;E&#39;, &#39;x&#39;, &#39;p&#39;, &#39;l&#39;, &#39;i&#39;, &#39;c&#39;, &#39;i&#39;, &#39;t&#39;, &#39; &#39;, &#39;i&#39;, &#39;s&#39;, &#39; &#39;, &#39;b&#39;, &#39;e&#39;, &#39;t&#39;, &#39;t&#39;, &#39;e&#39;, &#39;r&#39;, &#39; &#39;, &#39;t&#39;, &#39;h&#39;, &#39;a&#39;, &#39;n&#39;, &#39; &#39;, &#39;i&#39;, &#39;m&#39;, &#39;p&#39;, &#39;l&#39;, &#39;i&#39;, &#39;c&#39;, &#39;i&#39;, &#39;t&#39;, &#39;\n&#39;, &#39;S&#39;, &#39;i&#39;, &#39;m&#39;, &#39;p&#39;, &#39;l&#39;, &#39;e&#39;, &#39; &#39;, &#39;i&#39;, &#39;s&#39;, &#39; &#39;, &#39;b&#39;, &#39;e&#39;, &#39;t&#39;, &#39;t&#39;, &#39;e&#39;, &#39;r&#39;, &#39; &#39;, &#39;t&#39;, &#39;h&#39;, &#39;a&#39;, &#39;n&#39;, &#39; &#39;, &#39;c&#39;, &#39;o&#39;, &#39;m&#39;, &#39;p&#39;, &#39;l&#39;, &#39;e&#39;, &#39;x&#39;, &#39;\n&#39;, &#39;C&#39;, &#39;o&#39;, &#39;m&#39;, &#39;p&#39;, &#39;l&#39;, &#39;e&#39;, &#39;x&#39;, &#39; &#39;, &#39;i&#39;, &#39;s&#39;, &#39; &#39;, &#39;b&#39;, &#39;e&#39;, &#39;t&#39;, &#39;t&#39;, &#39;e&#39;, &#39;r&#39;, &#39; &#39;, &#39;t&#39;, &#39;h&#39;, &#39;a&#39;, &#39;n&#39;, &#39; &#39;, &#39;c&#39;, &#39;o&#39;, &#39;m&#39;, &#39;p&#39;, &#39;l&#39;, &#39;i&#39;, &#39;c&#39;, &#39;a&#39;, &#39;t&#39;, &#39;e&#39;, &#39;d&#39;, &#39;\n&#39;, &#39;F&#39;, &#39;l&#39;, &#39;a&#39;, &#39;t&#39;, &#39; &#39;, &#39;i&#39;, &#39;s&#39;, &#39; &#39;, &#39;b&#39;, &#39;e&#39;, &#39;t&#39;, &#39;t&#39;, &#39;e&#39;, &#39;r&#39;, &#39; &#39;, &#39;t&#39;, &#39;h&#39;, &#39;a&#39;, &#39;n&#39;, &#39; &#39;, &#39;n&#39;, &#39;e&#39;, &#39;s&#39;, &#39;t&#39;, &#39;e&#39;, &#39;d&#39;, &#39;\n&#39;, &#39;S&#39;, &#39;p&#39;, &#39;a&#39;, &#39;r&#39;, &#39;s&#39;, &#39;e&#39;, &#39; &#39;, &#39;i&#39;, &#39;s&#39;, &#39; &#39;, &#39;b&#39;, &#39;e&#39;, &#39;t&#39;, &#39;t&#39;, &#39;e&#39;, &#39;r&#39;, &#39; &#39;, &#39;t&#39;, &#39;h&#39;, &#39;a&#39;, &#39;n&#39;, &#39; &#39;, &#39;d&#39;, &#39;e&#39;, &#39;n&#39;, &#39;s&#39;, &#39;e&#39;, &#39;\n&#39;, &#39;R&#39;, &#39;e&#39;, &#39;a&#39;, &#39;d&#39;, &#39;a&#39;, &#39;b&#39;, &#39;i&#39;, &#39;l&#39;, &#39;i&#39;, &#39;t&#39;, &#39;y&#39;, &#39; &#39;, &#39;c&#39;, &#39;o&#39;, &#39;u&#39;, &#39;n&#39;, &#39;t&#39;, &#39;s&#39;, &#39;\n&#39;, &#39;S&#39;, &#39;p&#39;, &#39;e&#39;, &#39;c&#39;, &#39;i&#39;, &#39;a&#39;, &#39;l&#39;, &#39; &#39;, &#39;c&#39;, &#39;a&#39;, &#39;s&#39;, &#39;e&#39;, &#39;s&#39;, &#39; &#39;, &#39;a&#39;, &#39;r&#39;, &#39;e&#39;, &#39;n&#39;, &#39;t&#39;, &#39; &#39;, &#39;s&#39;, &#39;p&#39;, &#39;e&#39;, &#39;c&#39;, &#39;i&#39;, &#39;a&#39;, &#39;l&#39;, &#39; &#39;, &#39;e&#39;, &#39;n&#39;, &#39;o&#39;, &#39;u&#39;, &#39;g&#39;, &#39;h&#39;, &#39; &#39;, &#39;t&#39;, &#39;o&#39;, &#39; &#39;, &#39;b&#39;, &#39;r&#39;, &#39;e&#39;, &#39;a&#39;, &#39;k&#39;, &#39; &#39;, &#39;t&#39;, &#39;h&#39;, &#39;e&#39;, &#39; &#39;, &#39;r&#39;, &#39;u&#39;, &#39;l&#39;, &#39;e&#39;, &#39;s&#39;, &#39;\n&#39;, &#39;A&#39;, &#39;l&#39;, &#39;t&#39;, &#39;h&#39;, &#39;o&#39;, &#39;u&#39;, &#39;g&#39;, &#39;h&#39;, &#39; &#39;, &#39;p&#39;, &#39;r&#39;, &#39;a&#39;, &#39;c&#39;, &#39;t&#39;, &#39;i&#39;, &#39;c&#39;, &#39;a&#39;, &#39;l&#39;, &#39;i&#39;, &#39;t&#39;, &#39;y&#39;, &#39; &#39;, &#39;b&#39;, &#39;e&#39;, &#39;a&#39;, &#39;t&#39;, &#39;s&#39;, &#39; &#39;, &#39;p&#39;, &#39;u&#39;, &#39;r&#39;, &#39;i&#39;, &#39;t&#39;, &#39;y&#39;, &#39;\n&#39;, &#39;E&#39;, &#39;r&#39;, &#39;r&#39;, &#39;o&#39;, &#39;r&#39;, &#39;s&#39;, &#39; &#39;, &#39;s&#39;, &#39;h&#39;, &#39;o&#39;, &#39;u&#39;, &#39;l&#39;, &#39;d&#39;, &#39; &#39;, &#39;n&#39;, &#39;e&#39;, &#39;v&#39;, &#39;e&#39;, &#39;r&#39;, &#39; &#39;, &#39;p&#39;, &#39;a&#39;, &#39;s&#39;, &#39;s&#39;, &#39; &#39;, &#39;s&#39;, &#39;i&#39;, &#39;l&#39;, &#39;e&#39;, &#39;n&#39;, &#39;t&#39;, &#39;l&#39;, &#39;y&#39;, &#39;\n&#39;, &#39;U&#39;, &#39;n&#39;, &#39;l&#39;, &#39;e&#39;, &#39;s&#39;, &#39;s&#39;, &#39; &#39;, &#39;e&#39;, &#39;x&#39;, &#39;p&#39;, &#39;l&#39;, &#39;i&#39;, &#39;c&#39;, &#39;i&#39;, &#39;t&#39;, &#39;l&#39;, &#39;y&#39;, &#39; &#39;, &#39;s&#39;, &#39;i&#39;, &#39;l&#39;, &#39;e&#39;, &#39;n&#39;, &#39;c&#39;, &#39;e&#39;, &#39;d&#39;, &#39;\n&#39;, &#39;I&#39;, &#39;n&#39;, &#39; &#39;, &#39;t&#39;, &#39;h&#39;, &#39;e&#39;, &#39; &#39;, &#39;f&#39;, &#39;a&#39;, &#39;c&#39;, &#39;e&#39;, &#39; &#39;, &#39;o&#39;, &#39;f&#39;, &#39; &#39;, &#39;a&#39;, &#39;m&#39;, &#39;b&#39;, &#39;i&#39;, &#39;g&#39;, &#39;u&#39;, &#39;i&#39;, &#39;t&#39;, &#39;y&#39;, &#39; &#39;, &#39;r&#39;, &#39;e&#39;, &#39;f&#39;, &#39;u&#39;, &#39;s&#39;, &#39;e&#39;, &#39; &#39;, &#39;t&#39;, &#39;h&#39;, &#39;e&#39;, &#39; &#39;, &#39;t&#39;, &#39;e&#39;, &#39;m&#39;, &#39;p&#39;, &#39;t&#39;, &#39;a&#39;, &#39;t&#39;, &#39;i&#39;, &#39;o&#39;, &#39;n&#39;, &#39; &#39;, &#39;t&#39;, &#39;o&#39;, &#39; &#39;, &#39;g&#39;, &#39;u&#39;, &#39;e&#39;, &#39;s&#39;, &#39;s&#39;, &#39;\n&#39;, &#39;T&#39;, &#39;h&#39;, &#39;e&#39;, &#39;r&#39;, &#39;e&#39;, &#39; &#39;, &#39;s&#39;, &#39;h&#39;, &#39;o&#39;, &#39;u&#39;, &#39;l&#39;, &#39;d&#39;, &#39; &#39;, &#39;b&#39;, &#39;e&#39;, &#39; &#39;, &#39;o&#39;, &#39;n&#39;, &#39;e&#39;, &#39; &#39;, &#39;a&#39;, &#39;n&#39;, &#39;d&#39;, &#39; &#39;, &#39;p&#39;, &#39;r&#39;, &#39;e&#39;, &#39;f&#39;, &#39;e&#39;, &#39;r&#39;, &#39;a&#39;, &#39;b&#39;, &#39;l&#39;, &#39;y&#39;, &#39; &#39;, &#39;o&#39;, &#39;n&#39;, &#39;l&#39;, &#39;y&#39;, &#39; &#39;, &#39;o&#39;, &#39;n&#39;, &#39;e&#39;, &#39; &#39;, &#39;o&#39;, &#39;b&#39;, &#39;v&#39;, &#39;i&#39;, &#39;o&#39;, &#39;u&#39;, &#39;s&#39;, &#39; &#39;, &#39;w&#39;, &#39;a&#39;, &#39;y&#39;, &#39; &#39;, &#39;t&#39;, &#39;o&#39;, &#39; &#39;, &#39;d&#39;, &#39;o&#39;, &#39; &#39;, &#39;i&#39;, &#39;t&#39;, &#39;\n&#39;, &#39;A&#39;, &#39;l&#39;, &#39;t&#39;, &#39;h&#39;, &#39;o&#39;, &#39;u&#39;, &#39;g&#39;, &#39;h&#39;, &#39; &#39;, &#39;t&#39;, &#39;h&#39;, &#39;a&#39;, &#39;t&#39;, &#39; &#39;, &#39;w&#39;, &#39;a&#39;, &#39;y&#39;, &#39; &#39;, &#39;m&#39;, &#39;a&#39;, &#39;y&#39;, &#39; &#39;, &#39;n&#39;, &#39;o&#39;, &#39;t&#39;, &#39; &#39;, &#39;b&#39;, &#39;e&#39;, &#39; &#39;, &#39;o&#39;, &#39;b&#39;, &#39;v&#39;, &#39;i&#39;, &#39;o&#39;, &#39;u&#39;, &#39;s&#39;, &#39; &#39;, &#39;a&#39;, &#39;t&#39;, &#39; &#39;, &#39;f&#39;, &#39;i&#39;, &#39;r&#39;, &#39;s&#39;, &#39;t&#39;, &#39; &#39;, &#39;u&#39;, &#39;n&#39;, &#39;l&#39;, &#39;e&#39;, &#39;s&#39;, &#39;s&#39;, &#39; &#39;, &#39;y&#39;, &#39;o&#39;, &#39;u&#39;, &#39;r&#39;, &#39;e&#39;, &#39; &#39;, &#39;D&#39;, &#39;u&#39;, &#39;t&#39;, &#39;c&#39;, &#39;h&#39;, &#39;\n&#39;, &#39;N&#39;, &#39;o&#39;, &#39;w&#39;, &#39; &#39;, &#39;i&#39;, &#39;s&#39;, &#39; &#39;, &#39;b&#39;, &#39;e&#39;, &#39;t&#39;, &#39;t&#39;, &#39;e&#39;, &#39;r&#39;, &#39; &#39;, &#39;t&#39;, &#39;h&#39;, &#39;a&#39;, &#39;n&#39;, &#39; &#39;, &#39;n&#39;, &#39;e&#39;, &#39;v&#39;, &#39;e&#39;, &#39;r&#39;, &#39;\n&#39;, &#39;A&#39;, &#39;l&#39;, &#39;t&#39;, &#39;h&#39;, &#39;o&#39;, &#39;u&#39;, &#39;g&#39;, &#39;h&#39;, &#39; &#39;, &#39;n&#39;, &#39;e&#39;, &#39;v&#39;, &#39;e&#39;, &#39;r&#39;, &#39; &#39;, &#39;i&#39;, &#39;s&#39;, &#39; &#39;, &#39;o&#39;, &#39;f&#39;, &#39;t&#39;, &#39;e&#39;, &#39;n&#39;, &#39; &#39;, &#39;b&#39;, &#39;e&#39;, &#39;t&#39;, &#39;t&#39;, &#39;e&#39;, &#39;r&#39;, &#39; &#39;, &#39;t&#39;, &#39;h&#39;, &#39;a&#39;, &#39;n&#39;, &#39; &#39;, &#39;r&#39;, &#39;i&#39;, &#39;g&#39;, &#39;h&#39;, &#39;t&#39;, &#39; &#39;, &#39;n&#39;, &#39;o&#39;, &#39;w&#39;, &#39;\n&#39;, &#39;I&#39;, &#39;f&#39;, &#39; &#39;, &#39;t&#39;, &#39;h&#39;, &#39;e&#39;, &#39; &#39;, &#39;i&#39;, &#39;m&#39;, &#39;p&#39;, &#39;l&#39;, &#39;e&#39;, &#39;m&#39;, &#39;e&#39;, &#39;n&#39;, &#39;t&#39;, &#39;a&#39;, &#39;t&#39;, &#39;i&#39;, &#39;o&#39;, &#39;n&#39;, &#39; &#39;, &#39;i&#39;, &#39;s&#39;, &#39; &#39;, &#39;h&#39;, &#39;a&#39;, &#39;r&#39;, &#39;d&#39;, &#39; &#39;, &#39;t&#39;, &#39;o&#39;, &#39; &#39;, &#39;e&#39;, &#39;x&#39;, &#39;p&#39;, &#39;l&#39;, &#39;a&#39;, &#39;i&#39;, &#39;n&#39;, &#39; &#39;, &#39;i&#39;, &#39;t&#39;, &#39;s&#39;, &#39; &#39;, &#39;a&#39;, &#39; &#39;, &#39;b&#39;, &#39;a&#39;, &#39;d&#39;, &#39; &#39;, &#39;i&#39;, &#39;d&#39;, &#39;e&#39;, &#39;a&#39;, &#39;\n&#39;, &#39;I&#39;, &#39;f&#39;, &#39; &#39;, &#39;t&#39;, &#39;h&#39;, &#39;e&#39;, &#39; &#39;, &#39;i&#39;, &#39;m&#39;, &#39;p&#39;, &#39;l&#39;, &#39;e&#39;, &#39;m&#39;, &#39;e&#39;, &#39;n&#39;, &#39;t&#39;, &#39;a&#39;, &#39;t&#39;, &#39;i&#39;, &#39;o&#39;, &#39;n&#39;, &#39; &#39;, &#39;i&#39;, &#39;s&#39;, &#39; &#39;, &#39;e&#39;, &#39;a&#39;, &#39;s&#39;, &#39;y&#39;, &#39; &#39;, &#39;t&#39;, &#39;o&#39;, &#39; &#39;, &#39;e&#39;, &#39;x&#39;, &#39;p&#39;, &#39;l&#39;, &#39;a&#39;, &#39;i&#39;, &#39;n&#39;, &#39; &#39;, &#39;i&#39;, &#39;t&#39;, &#39; &#39;, &#39;m&#39;, &#39;a&#39;, &#39;y&#39;, &#39; &#39;, &#39;b&#39;, &#39;e&#39;, &#39; &#39;, &#39;a&#39;, &#39; &#39;, &#39;g&#39;, &#39;o&#39;, &#39;o&#39;, &#39;d&#39;, &#39; &#39;, &#39;i&#39;, &#39;d&#39;, &#39;e&#39;, &#39;a&#39;, &#39;\n&#39;, &#39;N&#39;, &#39;a&#39;, &#39;m&#39;, &#39;e&#39;, &#39;s&#39;, &#39;p&#39;, &#39;a&#39;, &#39;c&#39;, &#39;e&#39;, &#39;s&#39;, &#39; &#39;, &#39;a&#39;, &#39;r&#39;, &#39;e&#39;, &#39; &#39;, &#39;o&#39;, &#39;n&#39;, &#39;e&#39;, &#39; &#39;, &#39;h&#39;, &#39;o&#39;, &#39;n&#39;, &#39;k&#39;, &#39;i&#39;, &#39;n&#39;, &#39;g&#39;, &#39; &#39;, &#39;g&#39;, &#39;r&#39;, &#39;e&#39;, &#39;a&#39;, &#39;t&#39;, &#39; &#39;, &#39;i&#39;, &#39;d&#39;, &#39;e&#39;, &#39;a&#39;, &#39; &#39;, &#39; &#39;, &#39;l&#39;, &#39;e&#39;, &#39;t&#39;, &#39;s&#39;, &#39; &#39;, &#39;d&#39;, &#39;o&#39;, &#39; &#39;, &#39;m&#39;, &#39;o&#39;, &#39;r&#39;, &#39;e&#39;, &#39; &#39;, &#39;o&#39;, &#39;f&#39;, &#39; &#39;, &#39;t&#39;, &#39;h&#39;, &#39;o&#39;, &#39;s&#39;, &#39;e&#39;]</span>

<span class="gp">In [23]: </span><span class="n">zen_string_no_punc</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">zen_list_no_punc</span><span class="p">)</span>

<span class="gp">In [24]: </span><span class="k">print</span><span class="p">(</span><span class="n">zen_string_no_punc</span><span class="p">)</span>
<span class="go">The Zen of Python by Tim Peters</span>
<span class="go">Beautiful is better than ugly</span>
<span class="go">Explicit is better than implicit</span>
<span class="go">Simple is better than complex</span>
<span class="go">Complex is better than complicated</span>
<span class="go">Flat is better than nested</span>
<span class="go">Sparse is better than dense</span>
<span class="go">Readability counts</span>
<span class="go">Special cases arent special enough to break the rules</span>
<span class="go">Although practicality beats purity</span>
<span class="go">Errors should never pass silently</span>
<span class="go">Unless explicitly silenced</span>
<span class="go">In the face of ambiguity refuse the temptation to guess</span>
<span class="go">There should be one and preferably only one obvious way to do it</span>
<span class="go">Although that way may not be obvious at first unless youre Dutch</span>
<span class="go">Now is better than never</span>
<span class="go">Although never is often better than right now</span>
<span class="go">If the implementation is hard to explain its a bad idea</span>
<span class="go">If the implementation is easy to explain it may be a good idea</span>
<span class="go">Namespaces are one honking great idea  lets do more of those</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>You can contemplate the zen of Python anytime by executing <code class="docutils literal"><span class="pre">import</span> <span class="pre">this</span></code>.</p>
<div class="last highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [25]: </span><span class="kn">import</span> <span class="nn">this</span>
<span class="go">The Zen of Python, by Tim Peters</span>

<span class="go">Beautiful is better than ugly.</span>
<span class="go">Explicit is better than implicit.</span>
<span class="go">Simple is better than complex.</span>
<span class="go">Complex is better than complicated.</span>
<span class="go">Flat is better than nested.</span>
<span class="go">Sparse is better than dense.</span>
<span class="go">Readability counts.</span>
<span class="go">Special cases aren&#39;t special enough to break the rules.</span>
<span class="go">Although practicality beats purity.</span>
<span class="go">Errors should never pass silently.</span>
<span class="go">Unless explicitly silenced.</span>
<span class="go">In the face of ambiguity, refuse the temptation to guess.</span>
<span class="go">There should be one-- and preferably only one --obvious way to do it.</span>
<span class="go">Although that way may not be obvious at first unless you&#39;re Dutch.</span>
<span class="go">Now is better than never.</span>
<span class="go">Although never is often better than *right* now.</span>
<span class="go">If the implementation is hard to explain, it&#39;s a bad idea.</span>
<span class="go">If the implementation is easy to explain, it may be a good idea.</span>
<span class="go">Namespaces are one honking great idea -- let&#39;s do more of those!</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>This workspace is provided for your convenience.  You can use this activecode window to try out anything you like.</p>

<textarea data-component="activecode" id=scratch_08_04 data-lang="python"    data-timelimit=25000  data-codelens="true" data-audio=''     >


</textarea>
</div>
</div>
</div>
<div class="section" id="common-comprehension-patterns">
<h1>3.9. Common Comprehension Patterns<a class="headerlink" href="#common-comprehension-patterns" title="Permalink to this headline">¶</a></h1>
<p>TODO</p>
<div class="section" id="use-built-in-helper-functions">
<h2>3.9.1. Use built-in helper functions<a class="headerlink" href="#use-built-in-helper-functions" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="use-built-in-functions-to-reduce-a-list-to-a-value">
<h2>3.9.2. Use built-in functions to reduce a list to a value<a class="headerlink" href="#use-built-in-functions-to-reduce-a-list-to-a-value" title="Permalink to this headline">¶</a></h2>
<p>There are a number of built-in Python functions that help us reduce a list to a
value, including <code class="docutils literal"><span class="pre">sum</span></code>, <code class="docutils literal"><span class="pre">len</span></code>, <code class="docutils literal"><span class="pre">max</span></code>, and <code class="docutils literal"><span class="pre">min</span></code>.  Remember to use these
functions along with a list comprehension to describe a computation on a
sequence of values.</p>
<p>For example, suppose that we want to compute <a class="reference external" href="https://en.wikipedia.org/wiki/Squared_deviations_from_the_mean">the sum of squares</a> for a small
set of numbers.  Let&#8217;s give this a try using the regular definition, shown
below.</p>
<div class="math">
\[SS = \sum_{i=1}^n (y_i - \bar{y})^2\]</div>
<p>For each value in the list we must subtract the mean and the square this
difference.  Finally, we add up all of these values.  We will create a function
for computing the mean and then another for computing the sum of squares.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [26]: </span><span class="n">mean</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">L</span><span class="p">:</span> <span class="nb">sum</span><span class="p">(</span><span class="n">L</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">L</span><span class="p">)</span>

<span class="gp">In [27]: </span><span class="n">ss</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">L</span><span class="p">:</span> <span class="nb">sum</span><span class="p">([(</span><span class="n">i</span> <span class="o">-</span> <span class="n">mean</span><span class="p">(</span><span class="n">L</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">L</span><span class="p">])</span>

<span class="gp">In [28]: </span><span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>

<span class="gp">In [29]: </span><span class="n">mean</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>
<span class="gh">Out[29]: </span><span class="go">3.0</span>

<span class="gp">In [30]: </span><span class="n">ss</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>
<span class="go">             Out[30]: 10.0</span>
</pre></div>
</div>
<p>On a modern computer, the above code is reasonably fast for fairly small lists.
Next, we use the IPython <code class="docutils literal"><span class="pre">%timeit</span></code> magic to time our function on various size
lists.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">31</span><span class="p">]:</span> <span class="o">%</span><span class="n">timeit</span> <span class="n">ss</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
   <span class="o">....</span><span class="p">:</span> <span class="o">%</span><span class="n">timeit</span> <span class="n">ss</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">3</span><span class="p">))</span>
   <span class="o">....</span><span class="p">:</span> <span class="o">%</span><span class="n">timeit</span> <span class="n">ss</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">4</span><span class="p">))</span>
   <span class="o">....</span><span class="p">:</span>
<span class="mi">1000</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">666</span> <span class="n">us</span> <span class="n">per</span> <span class="n">loop</span>
<span class="mi">10</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">3</span><span class="p">:</span> <span class="mf">53.2</span> <span class="n">ms</span> <span class="n">per</span> <span class="n">loop</span>
<span class="mi">1</span> <span class="n">loop</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">3</span><span class="p">:</span> <span class="mf">5.97</span> <span class="n">s</span> <span class="n">per</span> <span class="n">loop</span>
</pre></div>
</div>
<p>Notice that the <code class="docutils literal"><span class="pre">ss</span></code> function is taking about 100 times as long each time we
multiple the length of the list by 10.  This hints at a complexity of
<span class="math">\(O(n^2)\)</span>.  Consider the complexity of these functions.  The <code class="docutils literal"><span class="pre">mean</span></code>
function must visit each element of the list and is <span class="math">\(O(n)\)</span>.  The
inefficiency of the <code class="docutils literal"><span class="pre">ss</span></code> function results from calling the <code class="docutils literal"><span class="pre">mean</span></code> function
<strong>for each value in the list!</strong>.  Thus the time complexity of <code class="docutils literal"><span class="pre">ss</span></code> is
<span class="math">\(n*O(n) = O(n*n) = O(n^2)\)</span>.  We can fix this issue by using the usual
simplification shown below.</p>
<div class="math">
\[SS = \sum_{i=1}^n{y_i^2} - \frac{\left(\sum_{i=1}^n y_i\right)^2}{n}\]</div>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [31]: </span><span class="n">ss</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">L</span><span class="p">:</span> <span class="nb">sum</span><span class="p">([</span><span class="n">i</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">L</span><span class="p">])</span> <span class="o">-</span> <span class="nb">sum</span><span class="p">(</span><span class="n">L</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">L</span><span class="p">)</span>

<span class="gp">In [32]: </span><span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>

<span class="gp">In [33]: </span><span class="n">ss</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>
<span class="gh">Out[33]: </span><span class="go">10.0</span>
</pre></div>
</div>
<p>Now we refactor the code to clear up the meaning of each part.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [34]: </span><span class="n">sum_square_values</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">L</span><span class="p">:</span> <span class="nb">sum</span><span class="p">([</span><span class="n">i</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">L</span><span class="p">])</span>

<span class="gp">In [35]: </span><span class="n">ss</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">L</span><span class="p">:</span> <span class="n">sum_square_values</span><span class="p">(</span><span class="n">L</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">L</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">L</span><span class="p">)</span>

<span class="gp">In [36]: </span><span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>

<span class="gp">In [37]: </span><span class="n">ss</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>
<span class="gh">Out[37]: </span><span class="go">10.0</span>
</pre></div>
</div>
<p>Each of the component functions, <code class="docutils literal"><span class="pre">len</span></code>, <code class="docutils literal"><span class="pre">sum_values</span></code> and
<code class="docutils literal"><span class="pre">sum_square_values</span></code>, is <span class="math">\(O(n)\)</span> (they each visit a list element exactly
once and perform a <span class="math">\(O(1)\)</span> computation).  Therefore, this implementation is
<span class="math">\(O(n)\)</span>, which is illustrated below by the 10 fold increase in computation
time when increasing the length of a list by a factor of 10.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">31</span><span class="p">]:</span> <span class="o">%</span><span class="n">timeit</span> <span class="n">ss</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
   <span class="o">....</span><span class="p">:</span> <span class="o">%</span><span class="n">timeit</span> <span class="n">ss</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">3</span><span class="p">))</span>
   <span class="o">....</span><span class="p">:</span> <span class="o">%</span><span class="n">timeit</span> <span class="n">ss</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">4</span><span class="p">))</span>

<span class="mi">10000</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">3</span><span class="p">:</span> <span class="mf">42.5</span> <span class="n">us</span> <span class="n">per</span> <span class="n">loop</span>
<span class="mi">1000</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">406</span> <span class="n">us</span> <span class="n">per</span> <span class="n">loop</span>
<span class="mi">100</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">3</span><span class="p">:</span> <span class="mf">4.11</span> <span class="n">ms</span> <span class="n">per</span> <span class="n">loop</span>
</pre></div>
</div>
<div class="admonition-beware-of-premature-optimization admonition">
<p class="first admonition-title">Beware of Premature Optimization!</p>
<p>A well-known computer scientist, <a class="reference external" href="https://en.wikipedia.org/wiki/Donald_Knuth">Donald Knuth</a>, <a class="reference external" href="http://web.archive.org/web/20130731202547/http://pplab.snu.ac.kr/courses/adv_pl05/papers/p261-knuth.pdf">once said</a></p>
<blockquote>
<div>Programmers waste enormous amounts of time thinking about, or worrying
about, the speed of noncritical parts of their programs, and these
attempts at efficiency actually have a strong negative impact when
debugging and maintenance are considered. We should forget about small
efficiencies, say about 97% of the time: <strong>premature optimization is the
root of all evil.</strong> Yet we should not pass up our opportunities in that
critical 3%.</div></blockquote>
<p>It is important to think about the efficiency of your program, but follow
Knuth&#8217;s advice and worry about it only after you have demonstrated it is
slow.  Instead, follow <a class="reference external" href="https://en.wikiquote.org/wiki/Donald_Knuth">another pieces of advice from Knuth</a>.</p>
<blockquote>
<div>Let us change our traditional attitude to the construction of programs:
Instead of imagining that our main task is to instruct a computer what
to do, <strong>let us concentrate rather on explaining to human beings what we
want a computer to do.</strong></div></blockquote>
<p class="last">That is, you should focus on describing what your program does in such a way
that another programmer can understand just by reading your code.</p>
</div>
</div>
<div class="section" id="use-any-and-all-for-boolean-questions-about-a-list">
<h2>3.9.3. Use <code class="docutils literal"><span class="pre">any</span></code> and <code class="docutils literal"><span class="pre">all</span></code> for Boolean questions about a list<a class="headerlink" href="#use-any-and-all-for-boolean-questions-about-a-list" title="Permalink to this headline">¶</a></h2>
<p>There are two more functions that help use reduce a list to a value.  The Python
built-in functions <code class="docutils literal"><span class="pre">any</span></code> and <code class="docutils literal"><span class="pre">all</span></code> are useful when asking Boolean questions
about a list.  The function <code class="docutils literal"><span class="pre">any</span></code> takes a sequence as input nad returns True
if <em>any</em> of the elements in the sequence evaluate to <code class="docutils literal"><span class="pre">True</span></code>.  On the other
hand, when <code class="docutils literal"><span class="pre">all</span></code> is applied to a sequence, it only evaluates to <code class="docutils literal"><span class="pre">True</span></code> if
<em>all</em> of the elements of said sequence evaluate to <code class="docutils literal"><span class="pre">True</span></code>.</p>
<p>Suppose that we want to know if any or all of the elements of a list are even.
We can write a lambda functions to perform each task as follows.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [38]: </span><span class="n">all_even</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">L</span><span class="p">:</span> <span class="nb">all</span><span class="p">([</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">L</span><span class="p">])</span>

<span class="gp">In [39]: </span><span class="n">any_even</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">L</span><span class="p">:</span> <span class="nb">any</span><span class="p">([</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">L</span><span class="p">])</span>

<span class="gp">In [40]: </span><span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>

<span class="gp">In [41]: </span><span class="n">any_even</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>
<span class="gh">Out[41]: </span><span class="go">True</span>

<span class="gp">In [42]: </span><span class="n">all_even</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>
<span class="go">              Out[42]: False</span>
</pre></div>
</div>
<p>Notice that this pattern involves</p>
<ol class="arabic simple">
<li>Using a Boolean expression in the output expression of the comprehension.</li>
<li>Applying <code class="docutils literal"><span class="pre">any</span></code> or <code class="docutils literal"><span class="pre">all</span></code> to the list of Boolean values.</li>
</ol>
<p>Let&#8217;s refactor this code to clean it up, namely by introducing an <code class="docutils literal"><span class="pre">is_even</span></code>
function.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [43]: </span><span class="n">is_even</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span>

<span class="gp">In [44]: </span><span class="n">all_even</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">L</span><span class="p">:</span> <span class="nb">all</span><span class="p">([</span><span class="n">is_even</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">L</span><span class="p">])</span>

<span class="gp">In [45]: </span><span class="n">any_even</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">L</span><span class="p">:</span> <span class="nb">any</span><span class="p">([</span><span class="n">is_even</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">L</span><span class="p">])</span>

<span class="gp">In [46]: </span><span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>

<span class="gp">In [47]: </span><span class="n">any_even</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>
<span class="gh">Out[47]: </span><span class="go">True</span>

<span class="gp">In [48]: </span><span class="n">all_even</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>
<span class="go">              Out[48]: False</span>
</pre></div>
</div>
</div>
<div class="section" id="sometimes-it-is-easier-to-describe-what-your-don-t-want">
<h2>3.9.4. Sometimes it is easier to describe what your don&#8217;t want<a class="headerlink" href="#sometimes-it-is-easier-to-describe-what-your-don-t-want" title="Permalink to this headline">¶</a></h2>
<p>Suppose that we want to use list comprehensions to describe all the prime
numbers up to <code class="docutils literal"><span class="pre">n=120</span></code>.  A well-known algorithm for describing primes is the
<a class="reference external" href="https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes">Sieve of Eratosthenes</a>,
For each number <code class="docutils literal"><span class="pre">i</span></code> between 2 and <span class="math">\(\sqrt{n}\)</span>, this algorithm crosses out all
crossing out all the multiples of <code class="docutils literal"><span class="pre">i</span></code>.  The remaining numbers will be prime.
Notice that this algorithm describes numbers that are prime by <em>decribing all
numbers that are not</em>.  The following two list comprehensions perform the task
of finding all primes up to 120.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [49]: </span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span>

<span class="gp">In [50]: </span><span class="n">n</span> <span class="o">=</span> <span class="mi">120</span>

<span class="gp">In [51]: </span><span class="n">not_prime</span> <span class="o">=</span> <span class="p">[</span><span class="n">j</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">i</span><span class="p">,</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">)]</span>

<span class="gp">In [52]: </span><span class="n">prime</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">not_prime</span><span class="p">]</span>

<span class="gp">In [53]: </span><span class="n">prime</span>
<span class="gh">Out[53]: </span><span class="go"></span>
<span class="go">[2,</span>
<span class="go"> 3,</span>
<span class="go"> 5,</span>
<span class="go"> 7,</span>
<span class="go"> 11,</span>
<span class="go"> 13,</span>
<span class="go"> 17,</span>
<span class="go"> 19,</span>
<span class="go"> 23,</span>
<span class="go"> 29,</span>
<span class="go"> 31,</span>
<span class="go"> 37,</span>
<span class="go"> 41,</span>
<span class="go"> 43,</span>
<span class="go"> 47,</span>
<span class="go"> 53,</span>
<span class="go"> 59,</span>
<span class="go"> 61,</span>
<span class="go"> 67,</span>
<span class="go"> 71,</span>
<span class="go"> 73,</span>
<span class="go"> 79,</span>
<span class="go"> 83,</span>
<span class="go"> 89,</span>
<span class="go"> 97,</span>
<span class="go"> 101,</span>
<span class="go"> 103,</span>
<span class="go"> 107,</span>
<span class="go"> 109,</span>
<span class="go"> 113]</span>
</pre></div>
</div>
<p><strong>Illustration of the Sieve of Eratosthenes</strong></p>
<div class="figure">
<img alt="Illustration of the Sieve of Eratosthenes" src="https://upload.wikimedia.org/wikipedia/commons/b/b9/Sieve_of_Eratosthenes_animation.gif" />
<div class="legend">
The Sieve of Eratosthenes finds all the primes up to some number <code class="docutils literal"><span class="pre">n</span></code> by
crossing out all multiples of numbers from 2 to <span class="math">\(\sqrt{n}\)</span>.  This image was
copied from <a class="reference external" href="https://commons.wikimedia.org/wiki/File:Sieve_of_Eratosthenes_animation.gif">Wikipedia</a>
and is covered by the <a class="reference external" href="https://en.wikipedia.org/wiki/en:GNU_Free_Documentation_License">GNU Free Documentation License</a>.</div>
</div>
<p>As always, we can clean this code up with a little refactoring.  Let&#8217;s use two
lambda expressions to give meaning to the two range function calls in
<code class="docutils literal"><span class="pre">not_prime</span></code>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [54]: </span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span>

<span class="gp">In [55]: </span><span class="n">n</span> <span class="o">=</span> <span class="mi">120</span>

<span class="gp">In [56]: </span><span class="n">possible_factors</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>

<span class="gp">In [57]: </span><span class="n">multiples_of</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">i</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">i</span><span class="p">,</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

<span class="gp">In [58]: </span><span class="n">not_prime</span> <span class="o">=</span> <span class="p">[</span><span class="n">j</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">possible_factors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">multiples_of</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">n</span><span class="p">)]</span>

<span class="gp">In [59]: </span><span class="n">prime</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">not_prime</span><span class="p">]</span>

<span class="gp">In [60]: </span><span class="n">prime</span>
<span class="gh">Out[60]: </span><span class="go"></span>
<span class="go">[2,</span>
<span class="go"> 3,</span>
<span class="go"> 5,</span>
<span class="go"> 7,</span>
<span class="go"> 11,</span>
<span class="go"> 13,</span>
<span class="go"> 17,</span>
<span class="go"> 19,</span>
<span class="go"> 23,</span>
<span class="go"> 29,</span>
<span class="go"> 31,</span>
<span class="go"> 37,</span>
<span class="go"> 41,</span>
<span class="go"> 43,</span>
<span class="go"> 47,</span>
<span class="go"> 53,</span>
<span class="go"> 59,</span>
<span class="go"> 61,</span>
<span class="go"> 67,</span>
<span class="go"> 71,</span>
<span class="go"> 73,</span>
<span class="go"> 79,</span>
<span class="go"> 83,</span>
<span class="go"> 89,</span>
<span class="go"> 97,</span>
<span class="go"> 101,</span>
<span class="go"> 103,</span>
<span class="go"> 107,</span>
<span class="go"> 109,</span>
<span class="go"> 113]</span>
</pre></div>
</div>
<p>TODO</p>
<p>1. iterators: zip, enumerate, reversed
3. working with tuples
4. comprehensions for tables and matrices</p>
</div>
</div>


  
      
  <li id="relations-prev" class="navLink" title='Previous Section - 3.7. Sequence Methods and Working with Strings and Lists' data-toggle="tooltip">
    <a href="SequenceMethodsandWorkingwithStringsAndLists.html" >
      <i class='prevNav glyphicon glyphicon-chevron-left'></i>
    </a>
  </li>
  <a class="navLinkBg" id="navLinkBgLeft"  href="SequenceMethodsandWorkingwithStringsAndLists.html" ></a>
  
  <li id="relations-next" class="navLink" title='Next Section - 3.10. Computational Complexity and Big O Notation.' data-toggle="tooltip" >
    <a href="ComputationalComplexityAndBigONotation.html" >
      <i id="relationsNextIcon" class='nextNav glyphicon glyphicon-chevron-right'></i>
    </a>
  </li>
  <a class="navLinkBg navLink" id="navLinkBgRight" href="ComputationalComplexityAndBigONotation.html" >Next Section - 3.10. Computational Complexity and Big O Notation.</a>

<script type="text/javascript">

  $('#relations-prev').tooltip({'placement':'right', 'selector': '', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement':'left', 'selector': '', 'delay': { show: 100, hide: 50}});
  
</script>
  
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      
      | <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2015 bn8210wy.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.5.
    </p>
  </div>
</footer>



<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32029811-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



  </body>
</html>