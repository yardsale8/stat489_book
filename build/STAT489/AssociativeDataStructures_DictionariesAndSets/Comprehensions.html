<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>5.3. Dictionary and Set Comprehensions &mdash; Runestone Interactive Overview</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.0.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/codemirror.css" type="text/css" />
    <link rel="stylesheet" href="../_static/activecode.css" type="text/css" />
    <link rel="stylesheet" href="../_static/clickable.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pytutor.css" type="text/css" />
    <link rel="stylesheet" href="../_static/modal-basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/datafile.css" type="text/css" />
    <link rel="stylesheet" href="../_static/dragndrop.css" type="text/css" />
    <link rel="stylesheet" href="../_static/fitb.css" type="text/css" />
    <link rel="stylesheet" href="../_static/codemirror.css" type="text/css" />
    <link rel="stylesheet" href="../_static/livecode.css" type="text/css" />
    <link rel="stylesheet" href="../_static/parsons.css" type="text/css" />
    <link rel="stylesheet" href="../_static/lib/prettify.css" type="text/css" />
    <link rel="stylesheet" href="../_static/poll.css" type="text/css" />
    <link rel="stylesheet" href="../_static/tabbedstuff.css" type="text/css" />
    <link rel="stylesheet" href="../_static/video.css" type="text/css" />
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootswatch/2.3.1/""/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/jquery-ui-1.10.3.custom.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/user-highlights.css" type="text/css" />
    <link rel="stylesheet" href="../_static/runestone-custom-sphinx-bootstrap.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/runestonebase.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/jquery.highlight.js"></script>
    <script type="text/javascript" src="../_static/bookfuncs.js"></script>
    <script type="text/javascript" src="../_static/codemirror.js"></script>
    <script type="text/javascript" src="../_static/xml.js"></script>
    <script type="text/javascript" src="../_static/css.js"></script>
    <script type="text/javascript" src="../_static/htmlmixed.js"></script>
    <script type="text/javascript" src="../_static/python.js"></script>
    <script type="text/javascript" src="../_static/javascript.js"></script>
    <script type="text/javascript" src="../_static/activecode.js"></script>
    <script type="text/javascript" src="../_static/skulpt.min.js"></script>
    <script type="text/javascript" src="../_static/skulpt-stdlib.js"></script>
    <script type="text/javascript" src="../_static/clike.js"></script>
    <script type="text/javascript" src="../_static/timed_activecode.js"></script>
    <script type="text/javascript" src="../_static/animationbase.js"></script>
    <script type="text/javascript" src="../_static/mchoice.js"></script>
    <script type="text/javascript" src="../_static/timedmc.js"></script>
    <script type="text/javascript" src="../_static/timed.js"></script>
    <script type="text/javascript" src="../_static/clickable.js"></script>
    <script type="text/javascript" src="../_static/timedclickable.js"></script>
    <script type="text/javascript" src="../_static/d3.v2.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.ba-bbq.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.jsPlumb-1.3.10-all-min.js"></script>
    <script type="text/javascript" src="../_static/pytutor.js"></script>
    <script type="text/javascript" src="../_static/codelens.js"></script>
    <script type="text/javascript" src="../_static/skulpt.min.js"></script>
    <script type="text/javascript" src="../_static/skulpt-stdlib.js"></script>
    <script type="text/javascript" src="../_static/datafile.js"></script>
    <script type="text/javascript" src="../_static/dragndrop.js"></script>
    <script type="text/javascript" src="../_static/timeddnd.js"></script>
    <script type="text/javascript" src="../_static/fitb.js"></script>
    <script type="text/javascript" src="../_static/timedfitb.js"></script>
    <script type="text/javascript" src="../_static/livecode.js"></script>
    <script type="text/javascript" src="../_static/clike.js"></script>
    <script type="text/javascript" src="../_static/lib/prettify.js"></script>
    <script type="text/javascript" src="../_static/lib/hammer.min.js"></script>
    <script type="text/javascript" src="../_static/parsons.js"></script>
    <script type="text/javascript" src="../_static/timedparsons.js"></script>
    <script type="text/javascript" src="../_static/poll.js"></script>
    <script type="text/javascript" src="../_static/reveal.js"></script>
    <script type="text/javascript" src="../_static/shortanswer.js"></script>
    <script type="text/javascript" src="../_static/timed_shortanswer.js"></script>
    <script type="text/javascript" src="../_static/tabbedstuff.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/jquery-ui-1.10.3.custom.min.js"></script>
    <script type="text/javascript" src="../_static/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <script type="text/javascript" src="../_static/waypoints.min.js"></script>
    <script type="text/javascript" src="../_static/rangy-core.js"></script>
    <script type="text/javascript" src="../_static/rangy-textrange.js"></script>
    <script type="text/javascript" src="../_static/rangy-cssclassapplier.js"></script>
    <script type="text/javascript" src="../_static/user-highlights.js"></script>
    <script type="text/javascript" src="../_static/jquery.idle-timer.js"></script>
    <script type="text/javascript" src="../_static/processing-1.4.1.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.hotkey.js"></script>
    <script type="text/javascript" src="../_static/jquery-migrate-1.2.1.min.js"></script>
    <link rel="top" title="Runestone Interactive Overview" href="../index.html" />
    <link rel="up" title="5. Associative Data Structures - Dictionaries and Sets" href="toctree.html" />
    <link rel="next" title="5.4. Computational Complexity" href="ComputationalComplexity.html" />
    <link rel="prev" title="5.2. Sets" href="Sets.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
<link rel="shortcut icon" href="/runestone/static/favicon.ico" type="image/ico" />

<script type="text/javascript">
  eBookConfig = {};
  eBookConfig.host = 'http://127.0.0.1:8000' ? 'http://127.0.0.1:8000' : 'http://127.0.0.1:8000';
  eBookConfig.app = eBookConfig.host+'/runestone';
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.course = 'STAT489';
  eBookConfig.logLevel = 0;
  eBookConfig.loginRequired = false;
  eBookConfig.build_info = "unknown";
  eBookConfig.isLoggedIn = false;
  eBookConfig.useRunestoneServices = false;
  eBookConfig.python3 = true;
  eBookConfig.basecourse = 'STAT489';
</script>

<div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&status=0";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>



  </head>
  <body role="document">


<!-- Begin navbar -->
<div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type='button' class='navbar-toggle' data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div>
        <a class="brand-logo" style='background: transparent url("../_static/img/logo_small.png") no-repeat 0px 0px;' href="/runestone/default/user/login">&nbsp; </a>
        <a class="navbar-brand" href="../index.html">STAT489</a>
      </div>
    </div>

    <div class="navbar-collapse collapse navbar-ex1-collapse">

      <ul class="nav navbar-nav navbar-right">

        <li class="divider-vertical"></li>

        <!-- social media dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-share-alt" style="opacity: 0.9"></i>
          </a>
          <ul class="dropdown-menu social-menu">
              <li>
                <div>
                  <b>Runestone in social media:</b>
                </div>
                <a href="https://twitter.com/iRunestone" class="twitter-follow-button" data-show-count="true">Follow @iRunestone</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                <div class="fb-like" data-href="https://www.facebook.com/RunestoneInteractive" data-send="false" data-layout="button_count" data-width="300" data-show-faces="false" data-font="arial"></div>
              </li>

              <li class="divider"></li>
              <li>
                <div>
                  <b>Help support us:</b>
                </div>
                <div>
                    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
                  <input type="hidden" name="cmd" value="_s-xclick">
                  <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
                  ">
                  <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                  <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
                  </form>

                </div>
              </li>
          </ul>
        </li>
        <!-- end social media dropdown -->

        <li class="divider-vertical"></li>

        <!-- search dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-search" style='opacity:0.9;'></i>
          </a>
          <ul class='dropdown-menu'>
            
                <li><a href='../index.html'>Table of Contents</a></li>
            
            <li><a href='/runestone/static/STAT489/genindex.html'>Book Index</a></li>
            <li class="divider"></li>
            <li id="scratch_ac_link"><a href="javascript:ACFactory.toggleScratchActivecode()">Scratch ActiveCode</a></li>
            <li class="divider"></li>
            <li style="width: 240px;">
              <form class="navbar-search" style="margin:10px;" action="../search.html" method="get">
                <div class="input-group">
                  <input type="text" class="form-control" name="q" placeholder="Search this book" />
                  <span class="input-group-btn">
                    <button class="btn btn-primary" style="margin:0;" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </span>
                </div><!-- /input-group -->
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
            </li>
          </ul>
        </li>
        <!-- end search dropdown -->

        <li class="divider-vertical"></li>

        
        <li class="divider-vertical"></li>

        <!-- help menu dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-question-sign" style="opacity:0.9;"></i>
          </a>
          <ul class="dropdown-menu user-menu">
            <li><a href='/runestone/static/STAT489/navhelp.html'>Navigation Help</a></li>
            <li><a href='/runestone/static/overview/instructor.html'>Help for Instructors</a></li>
            <li class="divider"></li>
            <li><a href='http://runestoneinteractive.org'>About Runestone</a></li>
            <li><a href='/runestone/default/reportabug?course=STAT489&page=Comprehensions'>Report A Problem</a></li>
          </ul>
        </li>
        <!-- end help menu dropdown -->

        <li class="divider-vertical"></li>

      </ul>

      <ul class="nav navbar-nav">
        <li class="divider-vertical"></li>
        <!--
          <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">5.3. Dictionary and Set Comprehensions</a><ul>
<li><a class="reference internal" href="#the-dictionary-comprehension">5.3.1. The Dictionary Comprehension</a></li>
<li><a class="reference internal" href="#the-set-comprehension">5.3.2. The Set Comprehension</a></li>
<li><a class="reference internal" href="#merging-dictionaries">5.3.3. Merging Dictionaries</a></li>
<li><a class="reference internal" href="#the-levels-of-abstraction-for-a-dictionary">5.3.4. The levels of abstraction for a dictionary</a></li>
</ul>
</li>
</ul>
</ul>
</li>
          <li class="divider-vertical"></li>
        
        
          
  <li id="relations-prev" title="Previous Chapter - 5.2. Sets" data-toggle="tooltip">
    <a href="Sets.html" >
      <i class='glyphicon glyphicon-backward' style='opacity:0.9;'></i>
    </a>
  </li>
  
  <li id="relations-next" title='Next Chapter - 5.4. Computational Complexity' data-toggle="tooltip" >
    <a href="ComputationalComplexity.html" >
      <i class='glyphicon glyphicon-forward' style='opacity:0.9;'></i>
    </a>
  </li>
  <li class="divider-vertical"></li>

<script type="text/javascript">
  opts = {'placement':'bottom',
          'selector': '',
          'delay': { show: 100, hide: 50}
         };

  $('#relations-prev').tooltip(opts);
  $('#relations-next').tooltip(opts);
</script>
        -->
        
          <li></li>
        
      </ul>

    </div>
  </div>
</div>


<div class="container" id="continue-reading"></div>

<div class="container" id="main-content">
  
  <div class="section" id="dictionary-and-set-comprehensions">
<h1>5.3. Dictionary and Set Comprehensions<a class="headerlink" href="#dictionary-and-set-comprehensions" title="Permalink to this headline">¶</a></h1>
<p>We have seen how list comprehensions can used to describe and construct lists
with an expression.  Python has similar syntax for constructing dictionaries and
sets using comprehensions.</p>
<div class="section" id="the-dictionary-comprehension">
<h2>5.3.1. The Dictionary Comprehension<a class="headerlink" href="#the-dictionary-comprehension" title="Permalink to this headline">¶</a></h2>
<p>The dictionary comprehension uses the following syntax.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">dict_comp</span> <span class="o">=</span> <span class="p">{</span><span class="n">KEY</span><span class="p">:</span><span class="n">VAL</span> <span class="k">for</span> <span class="n">VAR</span> <span class="ow">in</span> <span class="n">SEQ</span> <span class="k">if</span> <span class="n">COND</span><span class="p">}</span>
</pre></div>
</div>
<p>Notice that the dictionary comprehension is similar to a list
comprehension in that it has a <code class="docutils literal"><span class="pre">for</span></code> sequence expression and an optional
<code class="docutils literal"><span class="pre">if</span></code> filter.  This comprehension is delimited by braces (<code class="docutils literal"><span class="pre">{}</span></code>) and
distinguished by the <code class="docutils literal"><span class="pre">KEY:VAL</span></code> key-value pair in the operation expression.</p>
<p>For example, we could construct a dictionary that maps integers to their square
root as follows.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">sqrts</span> <span class="o">=</span> <span class="p">{</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">**</span><span class="mf">0.5</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)}</span>

<span class="gp">In [2]: </span><span class="n">sqrts</span>
<span class="gh">Out[2]: </span><span class="go">{0: 0.0, 1: 1.0, 2: 1.4142135623730951, 3: 1.7320508075688772, 4: 2.0}</span>
</pre></div>
</div>
<p>This approach is useful for storing the output for expensive operations,
allowing the values to be looked up quickly without recomputing values.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We expand on this approach to saving expensive operations when discussing
<code class="docutils literal"><span class="pre">memiozation</span></code>.</p>
</div>
</div>
<div class="section" id="the-set-comprehension">
<h2>5.3.2. The Set Comprehension<a class="headerlink" href="#the-set-comprehension" title="Permalink to this headline">¶</a></h2>
<p>The set comprehension looks very similar to a dictionary comprehension, but is
distinguished by only having a value in the operation expression.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">set_comp</span> <span class="o">=</span> <span class="p">{</span><span class="n">VAL</span> <span class="k">for</span> <span class="n">VAR</span> <span class="ow">in</span> <span class="n">SEQ</span> <span class="k">if</span> <span class="n">COND</span><span class="p">}</span>
</pre></div>
</div>
<p>This comprehension is useful for creating a set of unique values from some
sequence of values.</p>
<p><strong>Check your understanding</strong></p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>

<span class="gp">In [4]: </span><span class="n">die_rolls</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="p">[</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>

<span class="gp">In [5]: </span><span class="n">unique_rolls</span> <span class="o">=</span> <span class="p">{</span><span class="n">roll</span> <span class="k">for</span> <span class="n">roll</span> <span class="ow">in</span> <span class="n">die_rolls</span><span class="p">(</span><span class="mi">5</span><span class="p">)}</span>

<span class="gp">In [6]: </span><span class="n">unique_rolls</span>
<span class="gh">Out[6]: </span><span class="go">{1, 3, 4, 5}</span>
</pre></div>
</div>

            <ul data-component="multiplechoice" data-multipleanswers="false"  id="identify_dictionary_comprehension_1">
            <p>Q-1: Which type of comprehension is given below?</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span><span class="n">w</span><span class="p">:</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">w</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">words</span><span class="p">)}</span>
</pre></div>
</div>

            <li data-component="answer"  id="identify_dictionary_comprehension_1_opt_a">(A) Set comprehension</li><li data-component="feedback" id="identify_dictionary_comprehension_1_opt_a">A set comprehension needs one value in the operation expression, not a key-value pair.</li>
            
            <li data-component="answer"  id="identify_dictionary_comprehension_1_opt_b">(B) List comprehension</li><li data-component="feedback" id="identify_dictionary_comprehension_1_opt_b">A list comprehension is delimited by brackets ('[',']') not braces ('{', '}').</li>
            
            <li data-component="answer" data-correct id="identify_dictionary_comprehension_1_opt_c">(C) Dictionary comprehension</li><li data-component="feedback" id="identify_dictionary_comprehension_1_opt_c">The dictionary comprehension can be identified by the surrounding braces and the key-value pair in the operation expression.</li>
            

            </ul>
            
            <ul data-component="multiplechoice" data-multipleanswers="false"  id="identify_set_comprehension_1">
            <p>Q-2: Which type of comprehension is given below?</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span><span class="n">w</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">w</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">words</span><span class="p">)}</span>
</pre></div>
</div>

            <li data-component="answer" data-correct id="identify_set_comprehension_1_opt_a">(A) Set comprehension</li><li data-component="feedback" id="identify_set_comprehension_1_opt_a">The set comprehension can be identified by the surrounding braces and single expression in the operation expression.</li>
            
            <li data-component="answer"  id="identify_set_comprehension_1_opt_b">(B) List comprehension</li><li data-component="feedback" id="identify_set_comprehension_1_opt_b">The dictionary comprehension needs a key-value pair in the operation expression.</li>
            
            <li data-component="answer"  id="identify_set_comprehension_1_opt_c">(C) Dictionary comprehension</li><li data-component="feedback" id="identify_set_comprehension_1_opt_c">A list comprehension is delimited by brackets ('[',']') not braces ('{', '}').</li>
            

            </ul>
            
            <ul data-component="multiplechoice" data-multipleanswers="false"  id="set_comp_count_1">
            <p>Q-3: What value will the following code return?</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">fear</span> <span class="o">=</span> <span class="s2">&quot;the only thing we have to fear is fear itself&quot;</span>
<span class="nb">len</span><span class="p">({</span><span class="n">w</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">fear</span><span class="o">.</span><span class="n">split</span><span class="p">()</span> <span class="k">if</span> <span class="s1">&#39;t&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">w</span><span class="p">})</span>
</pre></div>
</div>

            <li data-component="answer" data-correct id="set_comp_count_1_opt_a">(A) 5</li><li data-component="feedback" id="set_comp_count_1_opt_a">The word "fear" will only be counted once and all words containing a 't' will be excluded.</li>
            
            <li data-component="answer"  id="set_comp_count_1_opt_b">(B) 6</li><li data-component="feedback" id="set_comp_count_1_opt_b">The word "fear" will only be counted once.  A value is either in a set or not in a set, there is no repetition of values.</li>
            
            <li data-component="answer"  id="set_comp_count_1_opt_c">(C) 9</li><li data-component="feedback" id="set_comp_count_1_opt_c">All words containing a 't' will be excluded.</li>
            

            </ul>
            
            <ul data-component="multiplechoice" data-multipleanswers="false"  id="dict_comp_1">
            <p>Q-4: What value will the following code return?</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">fear</span> <span class="o">=</span> <span class="s2">&quot;the only thing we have to fear is fear itself&quot;</span>
<span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="n">w</span><span class="p">:</span><span class="mi">2</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">fear</span><span class="o">.</span><span class="n">split</span><span class="p">()}</span>
<span class="n">get</span><span class="p">(</span><span class="s1">&#39;fear&#39;</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>
</pre></div>
</div>

            <li data-component="answer"  id="dict_comp_1_opt_a">(A) 4</li><li data-component="feedback" id="dict_comp_1_opt_a">This dictionary maps each word to twice the length of the word.</li>
            
            <li data-component="answer" data-correct id="dict_comp_1_opt_b">(B) 8</li><li data-component="feedback" id="dict_comp_1_opt_b">This dictionary maps each word to twice the length of the word.</li>
            
            <li data-component="answer"  id="dict_comp_1_opt_c">(C) Error: You can't have an expression in the value position of the key-value pair.</li><li data-component="feedback" id="dict_comp_1_opt_c">Any expression can be used in the value position.  Expressions can also be used in the key position, but they must evaluate to an immutable hashable object.</li>
            

            </ul>
            </div>
<div class="section" id="merging-dictionaries">
<h2>5.3.3. Merging Dictionaries<a class="headerlink" href="#merging-dictionaries" title="Permalink to this headline">¶</a></h2>
<p>One application of set and dictionary comprehensions is the process of merging
two dictionaries.  Let&#8217;s create a function that called <code class="docutils literal"><span class="pre">merge</span></code> that takes two
dictionaries <code class="docutils literal"><span class="pre">d1</span></code> and <code class="docutils literal"><span class="pre">d2</span></code> as arguments and returns a new dictionary that
merges the values from both.  As it is possible that both dictionaries contain
the same keys, we will use the following rules to deal with these <em>key
collisions</em>.</p>
<ol class="arabic simple">
<li>Use the key-value pair from <code class="docutils literal"><span class="pre">d2</span></code>, if present.</li>
<li>Use the key-value pair from <code class="docutils literal"><span class="pre">d1</span></code> for all <code class="docutils literal"><span class="pre">key</span> <span class="pre">not</span> <span class="pre">in</span> <span class="pre">d2</span></code>.</li>
</ol>
<p>To make this process easier, we construct a helper function for selecting the
value from the correct dictionary.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [7]: </span><span class="kn">from</span> <span class="nn">toolz</span> <span class="kn">import</span> <span class="n">get</span>

<span class="gp">In [8]: </span><span class="n">get_value</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">key</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">:</span> <span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">d2</span><span class="p">)</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">d2</span> <span class="k">else</span> <span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">d1</span><span class="p">)</span>

<span class="gp">In [9]: </span><span class="n">d1</span><span class="p">,</span> <span class="n">d2</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span><span class="mi">12</span><span class="p">}</span>

<span class="gp">In [10]: </span><span class="k">assert</span> <span class="n">get_value</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">)</span> <span class="o">==</span> <span class="n">get</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">d2</span><span class="p">)</span>

<span class="gp">In [11]: </span><span class="k">assert</span> <span class="n">get_value</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">)</span> <span class="o">==</span> <span class="n">get</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">d1</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that we use two <code class="docutils literal"><span class="pre">assert</span></code> statements to determine if our helper function
is pulling values from the correct dictionary.  The fact that nothing happened
when we ran these lines indicates that the assertions held.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">An assert statement will do nothing when the condition is true, but
will throw an exception if it fails.  This is a useful technique for testing
functions, which will be discussed on more detail in a future chapter.</p>
</div>
<p>The second helper function will take the two dictionaries as arguments and
return a set of the combined keys.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [12]: </span><span class="n">all_keys</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">:</span> <span class="nb">set</span><span class="p">(</span><span class="n">d1</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">|</span> <span class="nb">set</span><span class="p">(</span><span class="n">d2</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

<span class="gp">In [13]: </span><span class="k">assert</span> <span class="n">all_keys</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">)</span> <span class="o">==</span> <span class="nb">set</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Now we can used a dictionary comprehension to construct the merged dictionaries.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [14]: </span><span class="n">my_merge</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">:</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span><span class="n">get_value</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">all_keys</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">)}</span>

<span class="gp">In [15]: </span><span class="n">my_merge</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">)</span>
<span class="gh">Out[15]: </span><span class="go">{&#39;a&#39;: 10, &#39;b&#39;: 2, &#39;c&#39;: 12}</span>
</pre></div>
</div>
<p>In a pattern that should have become familiar, the <code class="docutils literal"><span class="pre">toolz</span></code> package already
provides and implementation of <code class="docutils literal"><span class="pre">merge</span></code> that behaves in the same way.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [16]: </span><span class="kn">from</span> <span class="nn">toolz</span> <span class="kn">import</span> <span class="n">merge</span>

<span class="gp">In [17]: </span><span class="n">merge</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">)</span>
<span class="gh">Out[17]: </span><span class="go">{&#39;a&#39;: 10, &#39;b&#39;: 2, &#39;c&#39;: 12}</span>
</pre></div>
</div>
</div>
<div class="section" id="the-levels-of-abstraction-for-a-dictionary">
<h2>5.3.4. The levels of abstraction for a dictionary<a class="headerlink" href="#the-levels-of-abstraction-for-a-dictionary" title="Permalink to this headline">¶</a></h2>
<p>The reader should take a moment to consider the <em>levels of abstraction</em> for a
dictionary.</p>
<div class="admonition-the-levels-of-abstraction-for-a-dictionary admonition">
<p class="first admonition-title">The levels of abstraction for a dictionary</p>
<p class="last">A dictionary consists of keys and values.</p>
</div>
<div class="figure">
<img alt="The levels of abstraction for a dictionary" src="../_images/dict_levels.png" />
<div class="legend">
A dictionary consists of keys and values.</div>
</div>
<p>Our rule for writing clean code is to write functions that only work at one
level of abstraction.  If we are going to adhere to this rule when working with
dictionaries, we should write functions for working with the keys and values,
and then apply these functions to the dictionary or dictionaries.</p>
<div class="admonition-writing-clean-code-for-dictionaries admonition">
<p class="first admonition-title">Writing clean code for dictionaries</p>
<p>When processing dictionaries, do the following to ensure clean code:</p>
<ol class="last arabic simple">
<li>Write a function or functions to process keys.</li>
<li>Write a function or functions to process the values.</li>
<li>Write a function that uses a comprehension and the functions from <strong>1</strong> and
<strong>2</strong> to process the dictionary.</li>
</ol>
</div>
<p>The last example illustrated this pattern by first constructing functions that
worked on keys (made the collection of all keys) and values (pulled the value
from the correct dictionary).  These functions were then applied to the
dictionaries using a comprehension.</p>
<div class="figure">
<img alt="my_merge example of level of abstraction for a dictionary" src="../_images/dict_levels_example.png" />
<div class="legend">
In the my_merge example, two functions were written to process the keys and
values and then these functions were used in a comprehension to merge the
dictionaries.</div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We will develop a generalization of <code class="docutils literal"><span class="pre">merge</span></code> called <code class="docutils literal"><span class="pre">merge_with</span></code> when
developing higher-order functions for dictionaries.</p>
</div>
</div>
</div>


  
      
  <li id="relations-prev" class="navLink" title='Previous Section - 5.2. Sets' data-toggle="tooltip">
    <a href="Sets.html" >
      <i class='prevNav glyphicon glyphicon-chevron-left'></i>
    </a>
  </li>
  <a class="navLinkBg" id="navLinkBgLeft"  href="Sets.html" ></a>
  
  <li id="relations-next" class="navLink" title='Next Section - 5.4. Computational Complexity' data-toggle="tooltip" >
    <a href="ComputationalComplexity.html" >
      <i id="relationsNextIcon" class='nextNav glyphicon glyphicon-chevron-right'></i>
    </a>
  </li>
  <a class="navLinkBg navLink" id="navLinkBgRight" href="ComputationalComplexity.html" >Next Section - 5.4. Computational Complexity</a>

<script type="text/javascript">

  $('#relations-prev').tooltip({'placement':'right', 'selector': '', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement':'left', 'selector': '', 'delay': { show: 100, hide: 50}});
  
</script>
  
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      
      | <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017 Todd Iverson.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.5.
    </p>
  </div>
</footer>



<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32029811-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



  </body>
</html>